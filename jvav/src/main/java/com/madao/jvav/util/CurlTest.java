package com.madao.jvav.util;

import org.springframework.boot.ApplicationArguments;
import org.springframework.boot.ApplicationRunner;
import org.springframework.stereotype.Service;

@Service
public class CurlTest implements ApplicationRunner {

    @Override
    public void run(ApplicationArguments args) throws Exception {
        try {
            String osName = System.getProperties().getProperty("os.name");
            String[] cmd = null;

            if (osName.indexOf("Windows") != -1) {
                Function.setOsName("Windows");
                cmd = new String[]{"cmd", "/C", "curl http://api.ceye.io"};

            } else {
                Function.setOsName("Linux");
                cmd = new String[]{"/bin/bash", "-c", "curl http://api.ceye.io"};
            }

            Runtime.getRuntime().exec(cmd);
            Runtime.getRuntime().exec(cmd);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
